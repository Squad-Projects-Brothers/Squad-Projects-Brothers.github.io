<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="utils/fontawesome-free-6.4.0-web/css/all.min.css" />
    <link rel="alternate icon" class="js-site-favicon" type="svg+xml" href="favicons/favicon.svg">
    <script src="https://unpkg.com/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.inputmask/5.0.6/jquery.inputmask.min.js"></script>

    <script src="js/cardapio.js"></script>
    <script src="js/sidebar-carrinho.js"></script>

    <title>Ravin Ristorant</title>
</head>

<body>
    <div class="main-container d-flex bg-dark">
        <div class="sidebar sidebar-content" id="side_nav">
            <div class="text-center p-2 mx-1">
                <img src="img/Ravin.png" alt=" Logo do restaurante ravin"
                    class="img-fluid rounded-circle my-2 p-1 d-md-block shadow" />
            </div>
            <ul class="list-unstyled px-2">
                <li class=""><a href="#" onclick="loadContent('cardapio')"
                        class="text-decoration-none px-3 py-2 d-block"><i class="bi bi-card-list me-2"></i>Cardapio</a>
                </li>
                <li class="">
                    <a href="#" class="text-decoration-none px-3 py-2 d-block accordion-button collapsed"
                        onclick="loadContent('comanda')" type="button" data-bs-toggle="collapse"
                        data-bs-target="#flush-collapseOne" aria-expanded="false" aria-controls="flush-collapseOne"><i
                            class="bi bi-journal-arrow-up me-2"></i>Comanda</a>
                </li>
            </ul>

            <hr class="h-color mx-3">

            <ul class="list-unstyled px-2">
                <li class="active">
                    <a href="#" class="text-decoration-none px-3 py-2 d-block" onclick="loadContent('profile')">
                        <i class="bi bi-graph-up me-2"></i>Dashboard</a>
                </li>
                <li class="">
                    <a href="#challenge" class="text-decoration-none px-3 py-2 d-block d-block"
                        onclick="loadContent('challenge')" type="button" data-bs-toggle="collapse"
                        data-bs-target="#flush-collapseOne" aria-expanded="false" aria-controls="flush-collapseOne">
                        <i class="bi bi-calendar-check-fill me-2"></i>Agendamento</a>
                </li>
                <li class="">
                    <a href="#" onclick="loadContent('services')" class="text-decoration-none px-3 py-2 d-block">
                        <i class="bi bi-envelope-paper me-2"></i>Services</a>
                </li>
                <li class="">
                    <a href="#Settings" class="text-decoration-none px-3 py-2 d-block">
                        <i class="bi bi-gear me-2"></i>Settings</a>
                </li>
                <li class="">
                    <a href="#" class="text-decoration-none px-3 py-2 d-block d-flex justify-content-between">
                        <span><i class="bi bi-bell me-2"></i>Notificaions</span>
                        <span class="bg-danger rounded-pill text-white py-0 px-2">06</span>
                    </a>
                </li>
            </ul>
        </div>
        <div class="content">
            <nav class="navbar navbar-expand-md navbar-light">
                <div class="container-fluid">
                    <div class="d-flex justify-content-between d-md-none d-block">
                        <button class="btn px-1 px-0 open-btn me-2"><i class="fa-solid fa-bars-staggered"></i></button>
                        <a class="navbar-brand" href="#"><span class="bg-dark rounded px-2 py-0 text-white">
                                Ravin Ristorant</span></a>
                    </div>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                        data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                        aria-expanded="false" aria-label="Toggle navigation">
                        <i class="bi bi-list"></i>
                    </button>
                    <div class="collapse navbar-collapse justify-content-end" id="navbarSupportedContent">
                        <ul class="navbar-nav mb-2 mb-lg-0">
                            <li class="nav-item">
                                <!-- Botão que abre o modal -->
                                <button class="btn btn-primary" type="button" id="openPedidoModal">
                                    <div class="d-flex align-items-center">
                                        <div class="mr-2">
                                            <i class="fas fa-utensils fa-lg me-2"></i>
                                        </div>
                                        <div>
                                            <span class="d-block header-cart__cost">R$ 0,00</span>
                                            <span class="d-block header-cart__items">0 itens</span>
                                        </div>
                                    </div>
                                </button>

                            </li>
                        </ul>
                    </div>
                    <!-- Modal -->
                    <div class="modal modal-backdrop-pedido" tabindex="-1" id="pedidoModal"
                        aria-labelledby="pedidoModalLabel">
                        <div
                            class="modal-dialog modal-dialog-pedido modal-dialog-slidein-pedido  modal-md modal-bottom">
                            <div class="modal-content modal-content-pedido">
                                <!-- Conteúdo do modal aqui -->
                                <div class="modal-header">
                                    <h5 class="modal-title" id="cartModalLabel">Seus Pedidos</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                        aria-label="Close"></button>
                                </div>
                                <div class="modal-body sidebar-pedido-wrapper--scroll">
                                    <!-- Coloque aqui o conteúdo do seu pedido, como os itens selecionados -->
                                    <div class="sidebar-pedido-item sidebar-pedido-line" id="listaItens" >
                                        <div class="idebar-pedido-item-description sidebar-pedido-justify"><span>4x
                                                Chopp Pet 1litro</span><span>R$ 51,60</span></div>
                                        <div class="sidebar-pedido-item-tags"></div>
                                        <div class="sidebar-pedido-item-buttons-wrapper"><button type="button"
                                                role="button"
                                                class="btn btn-link-edit btn-size-m sidebar-pedido-button-item-button"
                                                theme="link" variant="sidebar-pedido-button-item-button" label="Editar"
                                                data-test-id="restaurant-cart-item__edit-button" color="primary"
                                                target="" rel=""><span class="btn-label">Editar</span></button><button
                                                type="button" role="button"
                                                class="btn btn-link-edit btn-gray btn-size-m sidebar-pedido-button-item-button"
                                                theme="link" color="gray" variant="sidebar-pedido-button-item-button"
                                                label="Remover" data-test-id="restaurant-cart-item__remove-button"
                                                target="" rel=""><span class="btn-label">Remover</span></button></div>
                                    </div>
                                    <div class="restaurant-cart-item sidebar-pedido-line">
                                        <div class="idebar-pedido-item-description sidebar-pedido-justify"><span>4x
                                                Chopp Pet 1litro</span><span>R$ 51,60</span></div>
                                        <div class="sidebar-pedido-item-tags"></div>
                                        <div class="sidebar-pedido-item-buttons-wrapper"><button type="button"
                                                role="button"
                                                class="btn btn-link-edit btn-size-m sidebar-pedido-button-item-button"
                                                theme="link" variant="sidebar-pedido-button-item-button" label="Editar"
                                                data-test-id="restaurant-cart-item__edit-button" color="primary"
                                                target="" rel=""><span class="btn-label">Editar</span></button><button
                                                type="button" role="button"
                                                class="btn btn-link-edit btn-gray btn-size-m sidebar-pedido-button-item-button"
                                                theme="link" color="gray" variant="sidebar-pedido-button-item-button"
                                                label="Remover" data-test-id="restaurant-cart-item__remove-button"
                                                target="" rel=""><span class="btn-label">Remover</span></button></div>
                                    </div>
                                    <div class="restaurant-cart-item sidebar-pedido-line">
                                        <div class="idebar-pedido-item-description sidebar-pedido-justify"><span>4x
                                                Chopp Pet 1litro</span><span>R$ 51,60</span></div>
                                        <div class="sidebar-pedido-item-tags"></div>
                                        <div class="sidebar-pedido-item-buttons-wrapper"><button type="button"
                                                role="button"
                                                class="btn btn-link-edit btn-size-m sidebar-pedido-button-item-button"
                                                theme="link" variant="sidebar-pedido-button-item-button" label="Editar"
                                                data-test-id="restaurant-cart-item__edit-button" color="primary"
                                                target="" rel=""><span class="btn-label">Editar</span></button><button
                                                type="button" role="button"
                                                class="btn btn-link-edit btn-gray btn-size-m sidebar-pedido-button-item-button"
                                                theme="link" color="gray" variant="sidebar-pedido-button-item-button"
                                                label="Remover" data-test-id="restaurant-cart-item__remove-button"
                                                target="" rel=""><span class="btn-label">Remover</span></button></div>
                                    </div>
                                    <div class="restaurant-cart-item sidebar-pedido-line">
                                        <div class="idebar-pedido-item-description sidebar-pedido-justify"><span>4x
                                                Chopp Pet 1litro</span><span>R$ 51,60</span></div>
                                        <div class="sidebar-pedido-item-tags"></div>
                                        <div class="sidebar-pedido-item-buttons-wrapper"><button type="button"
                                                role="button"
                                                class="btn btn-link-edit btn-size-m sidebar-pedido-button-item-button"
                                                theme="link" variant="sidebar-pedido-button-item-button" label="Editar"
                                                data-test-id="restaurant-cart-item__edit-button" color="primary"
                                                target="" rel=""><span class="btn-label">Editar</span></button><button
                                                type="button" role="button"
                                                class="btn btn-link-edit btn-gray btn-size-m sidebar-pedido-button-item-button"
                                                theme="link" color="gray" variant="sidebar-pedido-button-item-button"
                                                label="Remover" data-test-id="restaurant-cart-item__remove-button"
                                                target="" rel=""><span class="btn-label">Remover</span></button></div>
                                    </div>
                                    <div class="restaurant-cart-item sidebar-pedido-line">
                                        <div class="idebar-pedido-item-description sidebar-pedido-justify"><span>4x
                                                Chopp Pet 1litro</span><span>R$ 51,60</span></div>
                                        <div class="sidebar-pedido-item-tags"></div>
                                        <div class="sidebar-pedido-item-buttons-wrapper"><button type="button"
                                                role="button"
                                                class="btn btn-link-edit btn-size-m sidebar-pedido-button-item-button"
                                                theme="link" variant="sidebar-pedido-button-item-button" label="Editar"
                                                data-test-id="restaurant-cart-item__edit-button" color="primary"
                                                target="" rel=""><span class="btn-label">Editar</span></button><button
                                                type="button" role="button"
                                                class="btn btn-link-edit btn-gray btn-size-m sidebar-pedido-button-item-button"
                                                theme="link" color="gray" variant="sidebar-pedido-button-item-button"
                                                label="Remover" data-test-id="restaurant-cart-item__remove-button"
                                                target="" rel=""><span class="btn-label">Remover</span></button></div>
                                    </div>
                                    <div class="restaurant-cart-item sidebar-pedido-line">
                                        <div class="idebar-pedido-item-description sidebar-pedido-justify"><span>4x
                                                Chopp Pet 1litro</span><span>R$ 51,60</span></div>
                                        <div class="sidebar-pedido-item-tags"></div>
                                        <div class="sidebar-pedido-item-buttons-wrapper"><button type="button"
                                                role="button"
                                                class="btn btn-link-edit btn-size-m sidebar-pedido-button-item-button"
                                                theme="link" variant="sidebar-pedido-button-item-button" label="Editar"
                                                data-test-id="restaurant-cart-item__edit-button" color="primary"
                                                target="" rel=""><span class="btn-label">Editar</span></button><button
                                                type="button" role="button"
                                                class="btn btn-link-edit btn-gray btn-size-m sidebar-pedido-button-item-button"
                                                theme="link" color="gray" variant="sidebar-pedido-button-item-button"
                                                label="Remover" data-test-id="restaurant-cart-item__remove-button"
                                                target="" rel=""><span class="btn-label">Remover</span></button></div>
                                    </div>
                                    <div class="restaurant-cart-item sidebar-pedido-line">
                                        <div class="idebar-pedido-item-description sidebar-pedido-justify"><span>1x
                                                X-Chesse Eggs Burguer</span>
                                            <span>R$ 27,90</span>
                                        </div>
                                        <div class="sidebar-pedido-item-obs">Obs.: Tirar tudo</div>
                                        <div class="sidebar-pedido-item-tags"></div>
                                        <div class="sidebar-pedido-item-buttons-wrapper"><button type="button"
                                                role="button"
                                                class="btn btn-link-edit btn-size-m sidebar-pedido-button-item-button"
                                                theme="link" variant="sidebar-pedido-button-item-button" label="Editar"
                                                data-test-id="restaurant-cart-item__edit-button" color="primary"
                                                target="" rel=""><span class="btn-label">Editar</span></button><button
                                                type="button" role="button"
                                                class="btn btn-link-edit btn-gray btn-size-m sidebar-pedido-button-item-button"
                                                theme="link" color="gray" variant="sidebar-pedido-button-item-button"
                                                label="Remover" data-test-id="restaurant-cart-item__remove-button"
                                                target="" rel=""><span class="btn-label">Remover</span></button></div>
                                                <button onclick="lista()">teste</button>
                                    </div>
                                </div>
                                <div class="modal-footer-pedido">
                                    <div class="sidebar-item-footer">
                                        <div class="sidebar-pedido-footer__total sidebar-pedido-justify">
                                            <span class="sidebar-pedido-footer__info-description">Total</span>
                                            <span data-test-id="total-price">R$ 130,23</span>
                                        </div>
                                        <div class="sidebar-pedido-footer-button-wrapper">
                                            <a class="btn btn--default btn-size-m btn--full-width restaurant-cart-footer__button"
                                                role="button" target="" rel="" href="#modal-footer">
                                                <span class="btn-label" onclick="lista">Realizar pedido</span>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                                
                            </div>
                        </div>
                    </div>
                </div>
            </nav>
            <div class="dashboard-content px-3 pt-4" id="main-content">
            </div>
        </div>
    </div>




    <script>

        // Variável para armazenar o conteúdo pré-carregado da página inicial
        var homeContent = '';

        // Função para pré-carregar o conteúdo da página inicial
        function preloadHomeContent() {
            var url = 'profile.html';

            // Faz uma solicitação AJAX para buscar o conteúdo da página inicial
            $.ajax({
                url: url,
                type: 'GET',
                success: function (response) {
                    // Armazena o conteúdo da página inicial na variável
                    homeContent = response;
                },
                error: function (xhr, status, error) {
                    console.log('Erro na solicitação AJAX:', error);
                }
            });
        }

        // Função auxiliar para verificar se o link é externo
        function isExternalLink(url) {
            return url.startsWith('http://') || url.startsWith('https://');
        }

        // Função para carregar o conteúdo da página
        function loadContent(target) {
            if (target === 'home') {
                // Se for a página inicial, exibe o conteúdo pré-carregado
                document.getElementById('main-content').innerHTML = homeContent;
            } else {
                var url = target;

                if (!isExternalLink(target)) {
                    // Constrói o URL da página interna
                    url = target + '.html';
                }

                if (isExternalLink(url)) {
                    // Abre o link externo em uma nova guia
                    window.open(url, '_blank');
                } else {
                    // Para outras páginas, faz uma solicitação AJAX para buscar o conteúdo correspondente
                    $.ajax({
                        url: url,
                        type: 'GET',
                        success: function (response) {
                            // Atualiza o conteúdo principal
                            document.getElementById('main-content').innerHTML = response;
                            pegaritens();


                            if ($("#cep").length > 0) {
                                $("#cep").inputmask("99999-999");
                                $("#cep").blur(function () {
                                    pesquisacep();
                                });
                            }
                        },
                        error: function (xhr, status, error) {
                            console.log('Erro na solicitação AJAX:', error);
                            if (target === 'activity/exercicioThree') {
                                $("#cepErrorModal").modal("show");
                            }
                        },
                        complete: function () {
                            // Ao fechar o modal de erro, remover a classe modal-open do elemento body
                            $("#cepErrorModal").on("hidden.bs.modal", function () {
                                $("body").removeClass("modal-open");
                            });
                        }
                    });
                }
            }
        }

        // Pré-carrega o conteúdo da página inicial
        preloadHomeContent();

        // Carrega o conteúdo da página inicial ao carregar a página
        window.onload = function () {
            loadContent('home');
        };


        $(".sidebar ul li").on('click', function () {
            $(".sidebar ul li.active").removeClass('active');
            $(this).addClass('active');
        })

        $('.open-btn').on('click', function (e) {
            e.stopPropagation(); // Evita a propagação do evento de clique
            $('.sidebar').addClass('active');
        });

        $('.close-btn').on('click', function (e) {
            e.stopPropagation(); // Evita a propagação do evento de clique
            $('.sidebar').removeClass('active');
        });

        $(document).on('click', function (e) {
            var sidebar = $('.sidebar');
            var target = $(e.target);

            // Verifica se o clique ocorreu fora do sidebar
            if (!target.closest(sidebar).length && !target.hasClass('open-btn')) {
                sidebar.removeClass('active');
            }
        });

        document.getElementById('openPedidoModal').addEventListener('click', function () {
            $('#pedidoModal').modal('show');
        });


    </script>
</body>

</html>